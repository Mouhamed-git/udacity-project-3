{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { FeedItem } from '../models/feed-item.model';\nimport { BehaviorSubject } from 'rxjs';\nimport { ApiService } from '../../api/api.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../api/api.service\";\nexport let FeedProviderService = /*#__PURE__*/(() => {\n  class FeedProviderService {\n    constructor(api) {\n      this.api = api;\n      this.currentFeed$ = new BehaviorSubject([]);\n    }\n\n    getFeed() {\n      return __awaiter(this, void 0, void 0, function* () {\n        const req = yield this.api.get('/feed');\n        const items = req.rows;\n        this.currentFeed$.next(items);\n        return Promise.resolve(this.currentFeed$);\n      });\n    }\n\n    uploadFeedItem(caption, file) {\n      return __awaiter(this, void 0, void 0, function* () {\n        const res = yield this.api.upload('/feed', file, {\n          caption: caption,\n          url: file.name\n        });\n        const feed = [res, ...this.currentFeed$.value];\n        this.currentFeed$.next(feed);\n        return res;\n      });\n    }\n\n  }\n\n  FeedProviderService.ɵfac = function FeedProviderService_Factory(t) {\n    return new (t || FeedProviderService)(i0.ɵɵinject(i1.ApiService));\n  };\n\n  FeedProviderService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: FeedProviderService,\n    factory: FeedProviderService.ɵfac,\n    providedIn: 'root'\n  });\n  return FeedProviderService;\n})();","map":null,"metadata":{},"sourceType":"module"}